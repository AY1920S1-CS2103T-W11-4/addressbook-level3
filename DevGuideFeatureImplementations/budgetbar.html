<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.6.1"><title>Budget Bar display</title><link rel="stylesheet" href="./gh-pages.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"></head><body class="article"><div id="seedu-header"><nav class="navbar navbar-lg navbar-light bg-lighter"><div class="container"><a class="navbar-brand" href="https://se-edu.github.io/"><img src="../images/SeEduLogo.png" alt="SE-EDU"></a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level1">AB-1</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level2">AB-2</a></li><li class="nav-item"><a class="nav-link active" href="../index.html">AB-3</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/addressbook-level4">AB-4</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/collate">Collate</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/se-book">Book</a></li><li class="nav-item"><a class="nav-link" href="https://se-edu.github.io/learningresources">Resources</a></li></ul></div></nav></div><div id="site-header"><nav class="navbar navbar-light bg-light"><div class="container"><a class="navbar-brand" href="../index.html">AddressBook-Level3</a><ul class="navbar-nav"><li class="nav-item"><a class="nav-link" href="../UserGuide.html">User Guide</a></li><li class="nav-item"><a class="nav-link" href="../DeveloperGuide.html">Developer Guide</a></li><li class="nav-item"><a class="nav-link" href="../LearningOutcomes.html">LOs</a></li><li class="nav-item"><a class="nav-link" href="../AboutUs.html">About Us</a></li><li class="nav-item"><a class="nav-link" href="../ContactUs.html">Contact Us</a></li><li class="navitem"><a class="nav-link" href="https://github.com/se-edu/addressbook-level3"><span class="fa fa-github fa-lg" aria-hidden="true"></span>&nbsp;View on GitHub</a></li></ul></div></nav></div><div id="header"></div><div id="content"><div class="sect2">
<h3 id="budget-bar-display"><a class="link" href="#budget-bar-display">Budget Bar display</a></h3>
<div class="paragraph">
<p>The budget bar display provides a graphic overview of meals consumed on the current day,
comparing against the total calorie budget set by the user.</p>
</div>
<div class="sect3">
<h4 id="implementation"><a class="link" href="#implementation">Implementation</a></h4>
<div class="paragraph">
<p>The budget bar feature is implemented via the <code>BudgetBar</code> class.
It is a JavaFx UI component, which wraps around <code>MealLog</code> and <code>CalorieBudget</code>.
<code>MealLog</code> provides an observable list of meals eaten today,
while <code>CalorieBudget</code> provides the currently set user budget.</p>
</div>
<div class="paragraph">
<p>Using helper code from <code>ObservableUtil</code> and <code>ObservableListUtil</code>,
we compute several derived properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Total calories consumed</p>
</li>
<li>
<p>Percentage of budget consumed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From there, we again construct further observable/reactive values representing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bar info text color</p>
<div class="ulist">
<ul>
<li>
<p>Transitions from green to red, when more budget is consumed</p>
</li>
</ul>
</div>
</li>
<li>
<p>Bar info text</p>
<div class="ulist">
<ul>
<li>
<p>If budget has been set, shows <code>&lt;Total Consumed&gt; / &lt;Budget&gt;</code>.</p>
</li>
<li>
<p>If budget has not been set, only shows <code>&lt;Total Consumed&gt;</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Meal segments</p>
<div class="ulist">
<ul>
<li>
<p>Each meal is displayed as a proportionally-sized segment in the whole bar.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Position of warning/danger markers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following activity diagram shows the reactive update dependencies.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="BudgetMealUpdate.png" alt="BudgetMealUpdate">
</div>
</div>
</div>
<div class="sect3">
<h4 id="design-consideration"><a class="link" href="#design-consideration">Design Consideration</a></h4>
<div class="sect4">
<h5 id="aspect-base-ui-component-to-display-meal-segments"><a class="link" href="#aspect-base-ui-component-to-display-meal-segments">Aspect: Base UI component to display meal segments.</a></h5>
<div class="ulist">
<ul>
<li>
<p><strong>Alternative 1 (current choice):</strong>
Use ControlsFx&#8217;s <code>SegmentedBar</code> class to handle display of bar segments.</p>
<div class="ulist">
<ul>
<li>
<p>Pros:</p>
<div class="ulist">
<ul>
<li>
<p>No need to reimplement JavaFx <code>setLayout</code> logic</p>
</li>
<li>
<p>Better performance than <code>GridPane</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Cons:</p>
<div class="ulist">
<ul>
<li>
<p>Dependency on external library</p>
</li>
<li>
<p>Have to create a separate <code>BufferSegment</code> class to represent gap.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Alternative 2:</strong>
Use JavaFx&#8217;s <code>GridPane</code> to lay out bar segments, and <code>ColumnConstraints</code> to appropriately set column widths.</p>
<div class="ulist">
<ul>
<li>
<p>Pros:</p>
<div class="ulist">
<ul>
<li>
<p>No external library (other than JavaFx) needed</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cons:</p>
<div class="ulist">
<ul>
<li>
<p>Poor performance to due <code>Observable</code> machinery and <code>GridPane</code> layout</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Explanation of choice:
Simpler implementation and better performance outweighs the cost of using an external library.</p>
</li>
</ul>
</div>
</div>
</div>
</div></div><div id="footer"><div class="container"><div id="footer-text">Last updated 2019-11-11 11:57:44 UTC</div></div></div></body></html>